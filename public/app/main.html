<div class="mobile">
    <div class="chosen-date">
        <div class="arrow control-element" ng-click="calMove(-1)">
            <img class="icon rotate-180" src="/media/arrow.svg">
        </div>
        <input style="display: none" type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="dt" datepicker-template-url="lib/ui/datepicker/datepicker-tmpl.html" is-open="popup1.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" />
        <div class="date-title {{popup1.opened ? 'active' : ''}}" ng-click="openCalendar()">
            <div class="date-text">{{formDateText(dt)}}</div>
            <div class="additional-text">&nbsp;{{formAdditionalText(dt)}}</div>
        </div>
        <div class="arrow control-element" ng-click="calMove(1)">
            <img class="icon" src="/media/arrow.svg">
        </div>
    </div>
</div>

<div class="main-part" ng-cloak>
    <div class="left-side">
        <div class="chosen-date desktop">
            <div class="arrow control-element" ng-click="calMove(-1)">
                <img class="icon rotate-180" src="/media/arrow.svg">
            </div>
            <input style="display: none" type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="dt" datepicker-template-url="lib/ui/datepicker/datepicker-tmpl.html" is-open="popup1.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" />
            <div class="date-title {{popup1.opened ? 'active' : ''}}" ng-click="openCalendar()">
                <div class="date-text">{{formDateText(dt)}}</div>
                <div class="additional-text">&nbsp;{{formAdditionalText(dt)}}</div>
            </div>
            <div class="arrow control-element" ng-click="calMove(1)">
                <img class="icon" src="/media/arrow.svg">
            </div>
        </div>
        <div class="floors-list">
            <div class="floors-list-wrap">
                <div class="floor" ng-repeat="fl in floors | orderBy:'-' track by $index">
                    <div class="floor-title title-text">{{fl.floor}} ЭТАЖ</div>

                    <div class="rooms-list">
                        <div class="room-block {{room.hovered ? 'active' : ''}} {{$odd ? 'disabled' : ''}} {{room.pressed ? 'pressed' : ''}}" ng-repeat="room in fl.rooms track by $index">
                            <div class="room-title title-text">{{room.title}}</div>
                            <div class="person-limit">до {{room.capacity}} человек{{(room.capacity % 10 === 1 && room.capacity % 100 !== 11) ? 'a' : ''}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="right-side">
        <div class="timeline">
            <div class="hour-el {{isPreviousHour(a) ? 'prev' : ''}}" ng-repeat="a in hoursArray track by $index">
                {{a}}
                <div class="divider"></div>
            </div>

            <div class="current-time">
                <span class="time"></span>
                <div class="blue-line"></div>
            </div>
        </div>
        <div class="dashboard" drag-scroll="true">
            <div ng-repeat="fl in floors | orderBy:'-' track by $index" class="floor-section">
                <div ng-repeat="room in fl.rooms track by $index" ng-mouseover="toggleShowAddButton(true, room)" ng-mouseleave="toggleShowAddButton(false, room)" ng-mousemove="moveAddButton($event)" class="event-section">
                    <div ng-style="{'width': calcEventWidth(event), 'left': calcEventLeft(event)}" class="ev-block {{event.id === selectedEvent.id && forTooltips.showEventInfo ? 'selected' : ''}}" ng-mouseover="toggleShowAddButton(false, room); $event.stopPropagation()" ng-repeat="event in room.events" ng-click="toggleEventInfo($event, event, room)"></div>
                    <button ng-show="room.hovered" ng-click="createNewEvent($event, room)" ng-mousedown="toggleAddButtonPress(true, room)" ng-mouseup="toggleAddButtonPress(false, room)" class="add-event-button desktop">+</button>
                </div>
            </div>

            <div ng-show="forTooltips.showEventInfo" class="event-info">
                <div class="title-text">{{selectedEvent.title}}</div>
                <div class="description">{{selectedEvent.dateStart | date : 'd MMMM'}}, {{selectedEvent.dateStart | date : 'HH:mm'}} — {{selectedEvent.dateEnd | date : 'HH:mm'}} &nbsp;·&nbsp; {{selectedEvent.room.title}}</div>

                <div class="participants" ng-if="selectedEvent.users.length">
                    <div class="participant">
                        <div class="photo" style="background-image: url('{{selectedEvent.users[0].avatarUrl}}')"></div>
                        <div class="name">{{selectedEvent.users[0].login}}</div>
                    </div>
                    <div class="others" ng-if="selectedEvent.users.length > 1">и {{selectedEvent.users.length - 1}} {{declOfNum(selectedEvent.users.length - 1, ["участник", "участника", "участников"])}}</div>
                </div>

                <div class="control-element edit-event" ng-click="locateToEvent(selectedEvent.id)">
                    <img src="/media/edit.svg" />
                </div>
            </div>
        </div>
    </div>
</div>